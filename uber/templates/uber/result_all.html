{% extends "global/base.html" %}

{% block content %}
<div class="result-all-container">
    <div class="title-filter">
        <h1>Historico</h1>
        <div >
            <p>Filtrar por data</p>
             <form class="form-filter" action="{% url "uber:filter" %}" method="GET">
                    <input type="date" 
                    class="form-filter-control" 
                    id="startdate"
                    name="startdate"
                    value="{{start_date}}"
                    >
                    <input type="date" 
                    class="form-filter-control" 
                    id="enddate"
                    name="enddate"
                    value="{{end_date}}"
                    >
                    <button class="btn-filter" type="submit">Filtrar</button>
            </form>
        </div>

    </div>
    <table>
        <tr>
            <th>Data</th>
            <th>Horas trabalhada</th>
            <th>Faturamento</th>
            <th>Gasto com comb</th>
            <th>Gasto por km</th>
            <th>Lucro por km</th>
            <th>Lucro por hora</th>
            <th>Lucro dia</th>
        </tr>
    {% for result in results %}
            <tr class="{% cycle 'row-gray' 'row-white'%}">
                <td><a href="{% url "uber:result_detail" result.id %}">{{result.data_criacao|date:"d/m/Y"}}</a></td>
                <td>{{result.horas_trab|date:'H:i'}}</td>
                <td>R$ {{result.faturamento|floatformat:2}}</td>
                <td class="color-gasto">R$ {{result.gasto_com_comb|floatformat:2}}</td>
                <td class="color-gasto">R$ {{result.gasto_por_km|floatformat:2}}</td>
                <td class="color-lucro">R$ {{result.ganho_por_km|floatformat:2}}</td>
                <td class="color-lucro">R$ {{result.ganho_hora|floatformat:2}}</td>
                <td class="color-lucro">R$ {{result.lucro|floatformat:2}}</td>
            </tr>
            {% endfor %}
        </table>
</div>

<div class="total-container">
    <h1><span style="color:blue">Total</span>/<span style="color:purple">MÃ©dia</span></h1>
    <table>
        <tr>
            <th>Dias trabalhado</th>
            <th>Horas trabalhada</th>
            <th>Faturamento</th>
            <th>Gasto com comb</th>
            <th>Gasto por km</th>
            <th>Lucro por km</th>
            <th>Lucro por hora</th>
            <th>Lucro </th>
        </tr>
        <tr class="{% cycle 'row-gray' 'row-white'%}">
            <td><span class="color-total">{{total_dias}}</span></td>
            <td><span class="color-total">{{total_horas_trab}}</span>/<span class="color-media">{{media_horas_trab}}</span></td>
            <td><span class="color-total">{{total_faturamento|floatformat:2}}</span>/<span class="color-media">{{media_faturamento|floatformat:2}}</span></td>
            <td><span class="color-total">{{total_gasto_comb|floatformat:2}}</span>/<span class="color-media">{{media_gasto_comb|floatformat:2}}</span></td>
            <td><span class="color-media">{{media_gasto_km|floatformat:2}}</span></td>
            <td><span class="color-media">{{media_lucro_km|floatformat:2}}</span></td>
            <td><span class="color-media">{{media_lucro_hora|floatformat:2}}</span></td>
            <td><span class="color-total">{{total_lucro|floatformat:2}}</span>/<span class="color-media">{{media_lucro|floatformat:2}}</span></td>
        </tr>
</div>
    
{% endblock content %}